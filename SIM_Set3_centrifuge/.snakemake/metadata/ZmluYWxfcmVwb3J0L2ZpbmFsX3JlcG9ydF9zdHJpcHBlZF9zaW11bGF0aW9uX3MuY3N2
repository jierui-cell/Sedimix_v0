{"version": null, "code": "gASVtwcAAAAAAAAoQyqXAHQBAAAAAAAAAAAAAGQBfA58EawCpgMAAKsDAAAAAAAAAAABAGQAUwCUKIwFaW5wdXSUjAZvdXRwdXSUjAZwYXJhbXOUjAl3aWxkY2FyZHOUjAd0aHJlYWRzlIwJcmVzb3VyY2VzlIwDbG9nlIwHdmVyc2lvbpSMBHJ1bGWUjAljb25kYV9lbnaUjA1jb250YWluZXJfaW1nlIwQc2luZ3VsYXJpdHlfYXJnc5SMD3VzZV9zaW5ndWxhcml0eZSMC2Vudl9tb2R1bGVzlIwMYmVuY2hfcmVjb3JklIwFam9iaWSUjAhpc19zaGVsbJSMD2JlbmNoX2l0ZXJhdGlvbpSMD2NsZWFudXBfc2NyaXB0c5SMCnNoYWRvd19kaXKUjA1lZGl0X25vdGVib29rlIwPY29uZGFfYmFzZV9wYXRolIwHYmFzZWRpcpSMGHJ1bnRpbWVfc291cmNlY2FjaGVfcGF0aJSMGF9faXNfc25ha2VtYWtlX3J1bGVfZnVuY5R0lF2UKE5YEQYAAAogICAgICAgICMgQ2FsY3VsYXRlIGF2ZXJhZ2UgcmVhZCBsZW5ndGggZm9yIHBvc3QtbWFwcGluZyBCQU0KICAgICAgICBhdmdfcmVhZF9sZW5ndGhfcG9zdF9tYXA9JChzYW10b29scyB2aWV3IHtpbnB1dC5wb3N0X21hcH0gfCBjdXQgLWYgMTAgfCBwZXJsIC1uZSAnY2hvbXA7cHJpbnQgbGVuZ3RoKCRfKSAuICIKIicgfCBhd2sgJ3t7IHN1bSArPSAkMTsgbisrIH19IEVORCB7eyBpZiAobiA+IDApIHByaW50IHN1bSAvIG47IGVsc2UgcHJpbnQgIjAiIH19JykKCiAgICAgICAgIyBDYWxjdWxhdGUgdG90YWwgcmVhZHMgZm9yIHBvc3QtbWFwcGluZyBCQU0KICAgICAgICB0b3RhbF9yZWFkc19wb3N0X21hcD0kKHNhbXRvb2xzIHZpZXcgLWMge2lucHV0LnBvc3RfbWFwfSkKCiAgICAgICAgIyBDYWxjdWxhdGUgYXZlcmFnZSByZWFkIGxlbmd0aCBmb3IgcG9zdC1tYXBwaW5nIEJBTSB3aXRoIFFDCiAgICAgICAgYXZnX3JlYWRfbGVuZ3RoX3Bvc3RfbWFwX3FjPSQoc2FtdG9vbHMgdmlldyB7aW5wdXQucG9zdF9tYXBfcWN9IHwgY3V0IC1mIDEwIHwgcGVybCAtbmUgJ2Nob21wO3ByaW50IGxlbmd0aCgkXykgLiAiCiInIHwgYXdrICd7eyBzdW0gKz0gJDE7IG4rKyB9fSBFTkQge3sgaWYgKG4gPiAwKSBwcmludCBzdW0gLyBuOyBlbHNlIHByaW50ICIwIiB9fScpCgogICAgICAgICMgQ2FsY3VsYXRlIHRvdGFsIHJlYWRzIGZvciBwb3N0LW1hcHBpbmcgQkFNIHdpdGggUUMKICAgICAgICB0b3RhbF9yZWFkc19wb3N0X21hcF9xYz0kKHNhbXRvb2xzIHZpZXcgLWMge2lucHV0LnBvc3RfbWFwX3FjfSkKCiAgICAgICAgIyBDYWxjdWxhdGUgYXZlcmFnZSByZWFkIGxlbmd0aCBmb3IgZmluYWwgcmVhZHMKICAgICAgICBhdmdfcmVhZF9sZW5ndGhfZmluYWw9JChzYW10b29scyB2aWV3IHtpbnB1dC5wb3N0X21hcF9xY19jbGFzc2l9IHwgY3V0IC1mIDEwIHwgcGVybCAtbmUgJ2Nob21wO3ByaW50IGxlbmd0aCgkXykgLiAiCiInIHwgYXdrICd7eyBzdW0gKz0gJDE7IG4rKyB9fSBFTkQge3sgaWYgKG4gPiAwKSBwcmludCBzdW0gLyBuOyBlbHNlIHByaW50ICIwIiB9fScpCgogICAgICAgICMgQ2FsY3VsYXRlIHRvdGFsIHJlYWRzIGZvciBmaW5hbCByZWFkcwogICAgICAgIHRvdGFsX3JlYWRzX2ZpbmFsPSQoc2FtdG9vbHMgdmlldyAtYyB7aW5wdXQucG9zdF9tYXBfcWNfY2xhc3NpfSkKCiAgICAgICAgIyBPdXRwdXQgdGhlIGZpbmFsIHJlcG9ydCBDU1YKICAgICAgICBlY2hvICJ0b3RhbF9yZWFkcyxhdmVyYWdlX3JlYWRfbGVuZ3RoLHRvdGFsX3JlYWRzX2FmdGVyX21hcF9xYyxhdmVyYWdlX3JlYWRfbGVuZ3RoX2FmdGVyX21hcF9xYyxmaW5hbF9yZWFkcyxmaW5hbF9hdmVyYWdlX3JlYWRfbGVuZ3RoIiA+IHtvdXRwdXR9CiAgICAgICAgZWNobyAiJHRvdGFsX3JlYWRzX3Bvc3RfbWFwLCRhdmdfcmVhZF9sZW5ndGhfcG9zdF9tYXAsJHRvdGFsX3JlYWRzX3Bvc3RfbWFwX3FjLCRhdmdfcmVhZF9sZW5ndGhfcG9zdF9tYXBfcWMsJHRvdGFsX3JlYWRzX2ZpbmFsLCRhdmdfcmVhZF9sZW5ndGhfZmluYWwiID4+IHtvdXRwdXR9CiAgICAgICAglGgPaBKGlGWMBXNoZWxslIWUdJQu", "rule": "final_report", "input": ["mapping/stripped_simulation_s.bam", "mapping/stripped_simulation_s_L30MQ25.bam", "mapping/stripped_simulation_s_classified_homo_sapiens.bam"], "log": [], "params": [], "shellcmd": "\n        # Calculate average read length for post-mapping BAM\n        avg_read_length_post_map=$(samtools view mapping/stripped_simulation_s.bam | cut -f 10 | perl -ne 'chomp;print length($_) . \"\n\"' | awk '{ sum += $1; n++ } END { if (n > 0) print sum / n; else print \"0\" }')\n\n        # Calculate total reads for post-mapping BAM\n        total_reads_post_map=$(samtools view -c mapping/stripped_simulation_s.bam)\n\n        # Calculate average read length for post-mapping BAM with QC\n        avg_read_length_post_map_qc=$(samtools view mapping/stripped_simulation_s_L30MQ25.bam | cut -f 10 | perl -ne 'chomp;print length($_) . \"\n\"' | awk '{ sum += $1; n++ } END { if (n > 0) print sum / n; else print \"0\" }')\n\n        # Calculate total reads for post-mapping BAM with QC\n        total_reads_post_map_qc=$(samtools view -c mapping/stripped_simulation_s_L30MQ25.bam)\n\n        # Calculate average read length for final reads\n        avg_read_length_final=$(samtools view mapping/stripped_simulation_s_classified_homo_sapiens.bam | cut -f 10 | perl -ne 'chomp;print length($_) . \"\n\"' | awk '{ sum += $1; n++ } END { if (n > 0) print sum / n; else print \"0\" }')\n\n        # Calculate total reads for final reads\n        total_reads_final=$(samtools view -c mapping/stripped_simulation_s_classified_homo_sapiens.bam)\n\n        # Output the final report CSV\n        echo \"total_reads,average_read_length,total_reads_after_map_qc,average_read_length_after_map_qc,final_reads,final_average_read_length\" > final_report/final_report_stripped_simulation_s.csv\n        echo \"$total_reads_post_map,$avg_read_length_post_map,$total_reads_post_map_qc,$avg_read_length_post_map_qc,$total_reads_final,$avg_read_length_final\" >> final_report/final_report_stripped_simulation_s.csv\n        ", "incomplete": false, "starttime": 1712606617.0, "endtime": 1712606649.0, "job_hash": 2943461222639, "conda_env": null, "container_img_url": null, "input_checksums": {}}